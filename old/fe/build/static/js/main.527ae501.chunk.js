(this["webpackJsonpspotify-app"]=this["webpackJsonpspotify-app"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(11),i=a.n(r),c=(a(60),a(33)),s=a.n(c),o=a(40),u=a(15),m=(a(100),a(101),a(165)),d=a(162),p=a(75),E=a.n(p),_=a(16),y={current_playlist:[],currently_playing:null,spotify:null,is_playing:!1,index:null,search_data:[],is_loading:!1,authorized:!1},v=Object(n.createContext)(y),f=v.Provider,g=function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){switch(t.type){case"SET_CURRENT_PLAYLIST":return Object(_.a)(Object(_.a)({},e),{},{current_playlist:t.current_playlist});case"SET_CURRENTLY_PLAYING":return Object(_.a)(Object(_.a)({},e),{},{currently_playing:t.currently_playing});case"SET_SPOTIFY":return Object(_.a)(Object(_.a)({},e),{},{spotify:t.spotify});case"SET_IS_PLAYING":return Object(_.a)(Object(_.a)({},e),{},{is_playing:t.is_playing});case"SET_CURRENT_INDEX":return Object(_.a)(Object(_.a)({},e),{},{index:t.index});case"SET_SEARCH_DATA":return Object(_.a)(Object(_.a)({},e),{},{search_data:t.search_data});case"SET_AUTHORIZED":return Object(_.a)(Object(_.a)({},e),{},{authorized:t.authorized});case"SET_IS_LOADING":return Object(_.a)(Object(_.a)({},e),{},{is_loading:t.is_loading});default:return e}}),y),r=Object(u.a)(a,2),i=r[0],c=r[1];return l.a.createElement(f,{value:{state:i,dispatch:c}},t)},h=a(49),b=a.n(h),N=a(70),x=a(71),O=new(function(){function e(){return Object(N.a)(this,e),this.audio=new Audio,this.track=null,null==e.instance&&(e.instance=this),e.instance}return Object(x.a)(e,[{key:"play",value:function(e){this.audio.src=e.preview_url,this.audio.play(),this.audio.is_playing=!0}},{key:"pause",value:function(){this.audio.pause(),this.audio.is_playing=!1}},{key:"setVolume",value:function(e){this.audio.volume=e/100}}]),e}()),S=a(171),T=a(174),j=a(76),k=a.n(j);var I=function(e){var t,a=e.track,r=e.index,i=Object(n.useContext)(v),c=i.dispatch,s=Object(n.useState)((function(){return!1})),o=Object(u.a)(s,2),p=o[0],_=o[1],y=l.a.useState(null),f=Object(u.a)(y,2),g=f[0],h=f[1],N=function(e){var t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(0);return t+":"+(a<10?"0":"")+a};return l.a.createElement(m.a,{container:!0,className:"songRow",direction:"row"},l.a.createElement(m.a,{item:!0,sm:6,md:4},l.a.createElement(m.a,{container:!0,spacing:1},l.a.createElement(m.a,{item:!0},(t=a,!0===i.state.is_playing&&(null===t||void 0===t?void 0:t.preview_url)===O.audio.src?l.a.createElement(d.a,{onClick:function(){return O.pause(),void c({type:"SET_IS_PLAYING",is_playing:!1})}},l.a.createElement(b.a,null)):l.a.createElement(d.a,{onClick:function(){return function(e){O.play(e),c({type:"SET_IS_PLAYING",is_playing:!0}),c({type:"SET_CURRENTLY_PLAYING",currently_playing:e}),c({type:"SET_CURRENT_INDEX",index:r})}(t)}},l.a.createElement(E.a,null)))),l.a.createElement(m.a,{item:!0},l.a.createElement("img",{className:"songRow__album",src:null===a||void 0===a?void 0:a.album.images[0].url,alt:""})),l.a.createElement(m.a,{item:!0},l.a.createElement("div",{className:"songRow__info"},l.a.createElement("h1",null,null===a||void 0===a?void 0:a.name),l.a.createElement("p",null,null===a||void 0===a?void 0:a.artists.map((function(e){return e.name})).join(", ")," - "))))),l.a.createElement(S.a,{smDown:!0},l.a.createElement(m.a,{item:!0,xs:3},null===a||void 0===a?void 0:a.album.name),l.a.createElement(m.a,{item:!0,xs:3},null===a||void 0===a?void 0:a.album.release_date),l.a.createElement(m.a,{item:!0,xs:2},N(null===a||void 0===a?void 0:a.duration_ms))),l.a.createElement(S.a,{mdUp:!0},l.a.createElement(m.a,{item:!0,xs:3},l.a.createElement(d.a,{onClick:function(e){h(e.currentTarget),_(!0)}},l.a.createElement(k.a,null)))),l.a.createElement(T.a,{open:p,anchorEl:g,className:"songRow__popOver",onClose:function(){return _(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}}," ",l.a.createElement(m.a,{item:!0,xs:12},"Release Date - ",null===a||void 0===a?void 0:a.album.release_date),l.a.createElement(m.a,{item:!0,xs:12},"Time - ",N(null===a||void 0===a?void 0:a.duration_ms))))},w=a(167);var R=function(){var e,t,a,r=Object(n.useContext)(v);return l.a.createElement("div",{className:"body"},l.a.createElement("div",{className:"body__info"},l.a.createElement("div",{className:"body__infoText"},l.a.createElement("strong",null,"PLAYLIST"),l.a.createElement("h2",null,null===(e=r.state.current_playlist)||void 0===e?void 0:e.name))),l.a.createElement("div",{className:"body__songs"},!1===r.state.is_loading?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"body__icons"}),l.a.createElement(m.a,{container:!0,alignItems:"center"},l.a.createElement(m.a,{item:!0,xs:4,md:4},"Title"),l.a.createElement(S.a,{smDown:!0},l.a.createElement(m.a,{item:!0,md:3},"Artist")),l.a.createElement(S.a,{smDown:!0},l.a.createElement(m.a,{item:!0,xs:3},"Release Date"),l.a.createElement(m.a,{item:!0,xs:2},"Time"))),null===(t=r.state.current_playlist)||void 0===t||null===(a=t.tracks)||void 0===a?void 0:a.items.map((function(e,t){return l.a.createElement(I,{track:e.track,playSong:!0,key:t,index:t})}))):l.a.createElement(m.a,{container:!0,justify:"center"},l.a.createElement(w.a,null))))};a(106);var C=function(){return l.a.createElement("div",{className:"login"},l.a.createElement("div",{className:"login__container"},l.a.createElement("img",{src:"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_RGB_White.png",alt:"logo"}),l.a.createElement("a",{href:"https://spotify-app-edward-lanto.herokuapp.com/login"},"Login with Spotify")))},L=a(30),A=a(10),P=(a(107),a(172)),Y=a(168),D=a(77),G=a.n(D),U=(a(108),a(32)),z=a.n(U);var H=function(){var e=Object(n.useContext)(v).dispatch,t=Object(n.useState)((function(){return""})),a=Object(u.a)(t,2),r=a[0],i=a[1],c=Object(A.f)(),m=Object(n.useState)((function(){return[]})),d=Object(u.a)(m,2),p=d[0],E=d[1];function _(){return(_=Object(o.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.preventDefault(),t.next=4,z.a.get("/spotify/search?q=".concat(r));case 4:n=t.sent,e({type:"SET_SEARCH_DATA",search_data:n}),c.push("/search"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),E(t.t0.messaage);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}return l.a.createElement("form",{onSubmit:function(e){return _.apply(this,arguments)},className:"searchBar"},l.a.createElement(G.a,null),l.a.createElement("input",{className:"input-with-icon-adornment",placeholder:"Search by track or name",onChange:function(e){return i(e.target.value)}}),p)},B=a(52),F=a.n(B),X=a(56),Z=a.n(X);a(128);var M=function(e){var t=e.title,a=e.Icon,n=e.getPlaylist,r=e.id,i=Object(A.f)();return l.a.createElement("div",{className:"sidebarOption"},a&&l.a.createElement(a,{className:"sidebarOption__icon"}),t&&l.a.createElement("button",{type:"button",onClick:function(){return function(e){i.push("/"),n(e)}(r)}},l.a.createElement("h4",null,t)))},W=a(78),q=a.n(W),J=a(79),V=a.n(J);var $=function(e){var t=e.user,a=e.playlists,r=e.getPlaylist,i=Object(n.useState)((function(){return!1})),c=Object(u.a)(i,2),s=c[0],o=c[1];return l.a.createElement(m.a,{container:!0,justify:"space-between",className:"header",alignItems:"center"},l.a.createElement(m.a,{item:!0,xs:8,sm:6},l.a.createElement(m.a,{container:!0,direction:"row",alignItems:"center"},l.a.createElement(S.a,{mdUp:!0},l.a.createElement(Y.a,{onClick:function(){return o(!0)},className:"header__menuButton"},!1===s?l.a.createElement(q.a,null):l.a.createElement(V.a,null)),l.a.createElement(P.a,{anchor:"left",open:s,onClose:function(){return o(!1)}},function(){var e;return l.a.createElement("div",{className:"sidebar__mobileMenu"},l.a.createElement("div",{className:"sidebar sidebar__desktop"},l.a.createElement("div",{className:"sidebar__top"},l.a.createElement("img",{src:"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_RGB_Green.png",alt:"logo",className:"sidebar__logo"}),l.a.createElement(L.b,{to:"/"},l.a.createElement(F.a,null),l.a.createElement("h4",null,"Home")),l.a.createElement(H,null),l.a.createElement("button",{type:"button"},l.a.createElement(Z.a,null),l.a.createElement("h4",null,"Your Library"))),l.a.createElement("strong",{className:"sidebar__title"},"Playlists"),l.a.createElement("hr",null),null===a||void 0===a||null===(e=a.items)||void 0===e?void 0:e.map((function(e){return l.a.createElement(M,{title:e.name,key:e.name,getPlaylist:r,id:e.id})}))))}())),l.a.createElement("img",{src:"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_RGB_Green.png",alt:"logo",className:"header__logo"}))),l.a.createElement(m.a,{item:!0,className:"header__right"},l.a.createElement("h4",null,null===t||void 0===t?void 0:t.display_name)))},K=(a(129),a(80)),Q=a.n(K);var ee=function(e){var t,a=e.playlists,r=e.getPlaylist,i=Object(n.useContext)(v).dispatch;return l.a.createElement(S.a,{smDown:!0},l.a.createElement("div",{className:"sidebar sidebar__desktop"},l.a.createElement("div",{className:"sidebar__top"},l.a.createElement(L.b,{to:"/"},l.a.createElement(F.a,null),l.a.createElement("h4",null,"Home")),l.a.createElement(H,null)),l.a.createElement("strong",{className:"sidebar__title"},"Playlists"),l.a.createElement("hr",null),null===a||void 0===a||null===(t=a.items)||void 0===t?void 0:t.map((function(e){return l.a.createElement(M,{title:e.name,key:e.name,getPlaylist:r,id:e.id})})),l.a.createElement("div",{className:"sidebarOption"},l.a.createElement(Q.a,{className:"sidebarOption__icon"}),l.a.createElement("button",{type:"button",onClick:function(){z.a.get("/logout").then((function(){i({type:"SET_AUTHORIZED",authorized:!1})}))}},l.a.createElement("h4",null,"Logout")))))},te=a(81),ae=a.n(te),ne=a(82),le=a.n(ne),re=a(83),ie=a.n(re),ce=a(173),se=a(84),oe=a.n(se),ue=a(85),me=a.n(ue);a(130);var de=function(){var e,t,a,r,i=Object(n.useContext)(v),c=i.dispatch,s=Object(n.useState)(50),o=Object(u.a)(s,2),p=o[0],E=o[1],_=function(){var e,t;null===i.state.currently_playing?y():!1===(null===(e=i.state)||void 0===e?void 0:e.is_playing)&&(null===(t=i.state)||void 0===t?void 0:t.currently_playing)?(O.audio.play(),c({type:"SET_IS_PLAYING",is_playing:!0})):(O.audio.pause(),c({type:"SET_IS_PLAYING",is_playing:!1}))},y=function(){var e=i.state.current_playlist.tracks.items[0].track;O.play(e),c({type:"SET_IS_PLAYING",is_playing:!0}),c({type:"SET_CURRENTLY_PLAYING",currently_playing:e}),c({type:"SET_CURRENT_INDEX",index:0})};return l.a.createElement("div",{className:"footer"},l.a.createElement(m.a,{container:!0,spacing:1},i.state.currently_playing?l.a.createElement(m.a,{item:!0,xs:12,sm:4,md:3},l.a.createElement(m.a,{container:!0,direction:"row",alignItems:"center"},l.a.createElement(m.a,{item:!0,xs:12,sm:2},l.a.createElement("img",{className:"footer__album",src:null===(e=i.state.currently_playing)||void 0===e||null===(t=e.album)||void 0===t?void 0:t.images[0].url,alt:""})),l.a.createElement(m.a,{item:!0,xs:12,sm:9,className:"songRow__infoContainer"},l.a.createElement("div",{className:"songRow__info"},l.a.createElement("h6",null,null===(a=i.state.currently_playing)||void 0===a?void 0:a.name),l.a.createElement("div",null,l.a.createElement("p",null,null===(r=i.state.currently_playing)||void 0===r?void 0:r.artists.map((function(e){return null===e||void 0===e?void 0:e.name})).join(", ")," ","-"," ")))))):l.a.createElement(m.a,{item:!0,xs:12,sm:4,md:3,className:"footer__songLoader"},"Please play a song"),l.a.createElement(m.a,{item:!0,xs:12,sm:4,md:6},l.a.createElement(m.a,{container:!0,direction:"row",justify:"center"},l.a.createElement(d.a,{"aria-label":"previous",onClick:function(){window.location.href.indexOf("search")>-1?O.play(i.state.search_data.data.tracks[i.state.index-1]):null===i.state.index||0===i.state.index?y():(O.play(i.state.current_playlist.tracks.items[i.state.index-1].track),c({type:"SET_CURRENTLY_PLAYING",currently_playing:i.state.current_playlist.tracks.items[i.state.index-1].track}),c({type:"SET_IS_PLAYING",is_playing:!0})),c({type:"SET_CURRENT_INDEX",index:i.state.index-1})}},l.a.createElement(le.a,null)),!0===i.state.is_playing?l.a.createElement(d.a,{"aria-label":"pause",onClick:_},l.a.createElement(b.a,null)):l.a.createElement(d.a,{"aria-label":"play",onClick:_},l.a.createElement(ae.a,null)),l.a.createElement(d.a,{"aria-label":"next",onClick:function(){window.location.href.indexOf("search")>-1?O.play(i.state.search_data.data.tracks[i.state.index+1]):null===i.state.index?y():(O.play(i.state.current_playlist.tracks.items[i.state.index+1].track),c({type:"SET_CURRENTLY_PLAYING",currently_playing:i.state.current_playlist.tracks.items[i.state.index+1].track})),c({type:"SET_CURRENT_INDEX",index:i.state.index+1}),c({type:"SET_IS_PLAYING",is_playing:!0})}},l.a.createElement(ie.a,null)))),l.a.createElement(m.a,{item:!0,xs:12,sm:4,md:3},l.a.createElement(m.a,{container:!0,spacing:1,className:"footer__sliderContainer",alignItems:"center"},l.a.createElement(m.a,{item:!0},l.a.createElement(oe.a,null)),l.a.createElement(m.a,{item:!0,xs:!0},l.a.createElement(ce.a,{value:p,onChange:function(e,t){O.setVolume(t),E(t)},"aria-labelledby":"continuous-slider"})),l.a.createElement(m.a,{item:!0},l.a.createElement(me.a,null))))))};a(131);a(132);var pe=function(){var e,t,a,r,i=Object(n.useContext)(v);return l.a.createElement("div",{className:"searchPage"},l.a.createElement("div",{className:"searchPage__infoText"},l.a.createElement("h2",null,"Search Results")),(null===(e=i.state.search_data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.tracks)?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,{container:!0,spacing:1,alignItems:"center"},l.a.createElement(m.a,{item:!0,xs:4},"Title"),l.a.createElement(m.a,{item:!0,xs:3},"Artist"),l.a.createElement(m.a,{item:!0,xs:3},"Release Date"),l.a.createElement(m.a,{item:!0,xs:2},"Time")),l.a.createElement("div",null,null===(a=i.state.search_data)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.tracks.map((function(e,t){return l.a.createElement(I,{track:e,playSong:!0,key:t,index:t})})))):l.a.createElement("div",null,"There are no search results, please provide a search query."))};a(133);var Ee=function(){var e=Object(n.useContext)(v),t=Object(n.useState)({}),a=Object(u.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)((function(){return[]})),d=Object(u.a)(c,2),p=d[0],E=d[1],_=e.dispatch,y=Object(n.useState)((function(){return""})),f=Object(u.a)(y,2),g=f[0],h=f[1],b=Object(n.useState)(!0),N=Object(u.a)(b,2),x=N[0],O=N[1];function S(e){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_({type:"SET_IS_LOADING",is_loading:!0}),e.next=4,z.a.get("/spotify/get_playlist",{params:{id:t}});case 4:a=e.sent,_({type:"SET_CURRENT_PLAYLIST",current_playlist:a.data}),_({type:"SET_IS_LOADING",is_loading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),h(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){(function(){var e=Object(o.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.a.get("/refresh_token");case 3:if(200!==e.sent.status){e.next=12;break}return e.next=7,z.a.get("/spotify/me");case 7:n=e.sent,i(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.user),E(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.playlists),_({type:"SET_CURRENT_PLAYLIST",current_playlist:null===n||void 0===n?void 0:n.data.current_playlist}),_({type:"SET_AUTHORIZED",authorized:!0});case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),_({type:"SET_AUTHORIZED",authorized:!1}),h(e.t0.message);case 18:return e.prev=18,O(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})));return function(){return e.apply(this,arguments)}})()()}),[_]),l.a.createElement(L.a,null,l.a.createElement(l.a.Fragment,null,!0===x&&l.a.createElement(m.a,{container:!0,justify:"center",className:"app__loader"},l.a.createElement(w.a,null)),!1===e.state.authorized?l.a.createElement(C,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"app"},l.a.createElement($,{user:r,playlists:p,getPlaylist:S}),l.a.createElement(ee,{playlists:p,getPlaylist:S}),l.a.createElement(A.c,null,l.a.createElement(A.a,{path:"/",exact:!0,component:R}),l.a.createElement(A.a,{path:"/search",exact:!0,component:pe})),l.a.createElement(de,null),g&&g))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _e=a(170);i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(g,null,l.a.createElement(_e.a,null,l.a.createElement(Ee,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,a){},94:function(e,t,a){e.exports=a(134)}},[[94,1,2]]]);
//# sourceMappingURL=main.527ae501.chunk.js.map