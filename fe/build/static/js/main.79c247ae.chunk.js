(this["webpackJsonpspotify-app"]=this["webpackJsonpspotify-app"]||[]).push([[0],{108:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(25),i=a.n(r),c=(a(46),a(26)),s=a.n(c),o=a(31),u=a(17),m=(a(81),a(82),a(131)),d=a(135),p=a(41),E=a.n(p),_=a(10),y={current_playlist:[],currently_playing:null,spotify:null,is_playing:!1,index:null,search_data:[],is_loading:!1},v=Object(n.createContext)(y),f=v.Provider,g=function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){switch(t.type){case"SET_CURRENT_PLAYLIST":return Object(_.a)(Object(_.a)({},e),{},{current_playlist:t.current_playlist});case"SET_CURRENTLY_PLAYING":return Object(_.a)(Object(_.a)({},e),{},{currently_playing:t.currently_playing});case"SET_SPOTIFY":return Object(_.a)(Object(_.a)({},e),{},{spotify:t.spotify});case"SET_IS_PLAYING":return Object(_.a)(Object(_.a)({},e),{},{is_playing:t.is_playing});case"SET_CURRENT_INDEX":return Object(_.a)(Object(_.a)({},e),{},{index:t.index});case"SET_SEARCH_DATA":return Object(_.a)(Object(_.a)({},e),{},{search_data:t.search_data});case"SET_IS_LOADING":return Object(_.a)(Object(_.a)({},e),{},{is_loading:t.is_loading});default:return e}}),y),r=Object(u.a)(a,2),i=r[0],c=r[1];return l.a.createElement(f,{value:{state:i,dispatch:c}},t)},h=a(35),b=a.n(h),x=a(56),N=a(57),S=new(function(){function e(){return Object(x.a)(this,e),this.audio=new Audio,this.track=null,null==e.instance&&(e.instance=this),e.instance}return Object(N.a)(e,[{key:"play",value:function(e){this.audio.src=e.preview_url,this.audio.play(),this.audio.is_playing=!0}},{key:"pause",value:function(){this.audio.pause(),this.audio.is_playing=!1}},{key:"setVolume",value:function(e){this.audio.volume=e/100}}]),e}());Object.freeze(S);var O=S;var T=function(e){var t,a=e.track,r=e.index,i=Object(n.useContext)(v),c=i.dispatch,s=function(e){O.play(e),c({type:"SET_IS_PLAYING",is_playing:!0}),c({type:"SET_CURRENTLY_PLAYING",currently_playing:e}),c({type:"SET_CURRENT_INDEX",index:r})};return l.a.createElement(m.a,{container:!0,spacing:1,className:"songRow",alignItems:"center",direction:"row"},l.a.createElement(m.a,{item:!0,xs:4},l.a.createElement(m.a,{container:!0,direction:"row"},(t=a,!0===i.state.is_playing&&(null===t||void 0===t?void 0:t.preview_url)===O.audio.src?l.a.createElement(d.a,{onClick:function(){return O.pause(),void c({type:"SET_IS_PLAYING",is_playing:!1})}},l.a.createElement(b.a,null)):(!1===i.state.is_playing&&(null===t||void 0===t||t.preview_url,O.audio.src),l.a.createElement(d.a,{onClick:function(){return s(t)}},l.a.createElement(E.a,null)))),l.a.createElement("img",{className:"songRow__album",src:null===a||void 0===a?void 0:a.album.images[0].url,alt:""}),l.a.createElement("div",{className:"songRow__info"},l.a.createElement("h1",null,null===a||void 0===a?void 0:a.name),l.a.createElement("p",null,null===a||void 0===a?void 0:a.artists.map((function(e){return e.name})).join(", ")," - ")))),l.a.createElement(m.a,{item:!0,xs:3},null===a||void 0===a?void 0:a.album.name),l.a.createElement(m.a,{item:!0,xs:3},null===a||void 0===a?void 0:a.album.release_date),l.a.createElement(m.a,{item:!0,xs:2},function(e){var t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(0);return t+":"+(a<10?"0":"")+a}(null===a||void 0===a?void 0:a.duration_ms)))},k=a(61),j=a.n(k),I=a(62),R=a.n(I),w=a(132);var C=function(){var e,t,a,r=Object(n.useContext)(v);return l.a.createElement("div",{className:"body"},l.a.createElement("div",{className:"body__info"},l.a.createElement("div",{className:"body__infoText"},l.a.createElement("strong",null,"PLAYLIST"),l.a.createElement("h2",null,null===(e=r.state.current_playlist)||void 0===e?void 0:e.name))),l.a.createElement("div",{className:"body__songs"},!1===r.state.is_loading?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"body__icons"},l.a.createElement(j.a,{fontSize:"large"}),l.a.createElement(R.a,null)),l.a.createElement(m.a,{container:!0,spacing:1,alignItems:"center"},l.a.createElement(m.a,{item:!0,xs:4},"Title"),l.a.createElement(m.a,{item:!0,xs:3},"Artist"),l.a.createElement(m.a,{item:!0,xs:3},"Release Date"),l.a.createElement(m.a,{item:!0,xs:2},"Time")),null===(t=r.state.current_playlist)||void 0===t||null===(a=t.tracks)||void 0===a?void 0:a.items.map((function(e,t){return l.a.createElement(T,{track:e.track,playSong:!0,key:t,index:t})}))):l.a.createElement(m.a,{container:!0,justify:"center"},l.a.createElement(w.a,null))))};a(87);var L=function(){return l.a.createElement("div",{className:"login"},l.a.createElement("div",{className:"login__container"},l.a.createElement("img",{src:"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_RGB_White.png",alt:"logo"}),l.a.createElement("a",{href:"/login"},"Login with Spotify")))},A=a(24),P=a(4);a(88);var Y=function(e){var t=e.user;return l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"header__right"},l.a.createElement("h4",null,null===t||void 0===t?void 0:t.display_name)))};a(89),a(90);var G=function(e){var t=e.title,a=e.Icon,n=e.getPlaylist,r=e.id;return l.a.createElement("div",{className:"sidebarOption"},a&&l.a.createElement(a,{className:"sidebarOption__icon"}),t&&l.a.createElement("button",{type:"button",onClick:function(){return n(r)}},l.a.createElement("h4",null,t)))},D=a(63),U=a.n(D),F=a(64),X=a.n(F),B=a(21),H=a.n(B),W=a(40),q=a.n(W);a(108);var z=function(){var e=Object(n.useContext)(v).dispatch,t=Object(n.useState)((function(){return""})),a=Object(u.a)(t,2),r=a[0],i=a[1],c=Object(P.f)();function m(){return(m=Object(o.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.preventDefault(),t.next=4,H.a.get("/spotify/search?q=".concat(r));case 4:n=t.sent,e({type:"SET_SEARCH_DATA",search_data:n}),c.push("/search"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("err");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}return l.a.createElement("form",{onSubmit:function(e){return m.apply(this,arguments)},className:"searchBar"},l.a.createElement(q.a,null),l.a.createElement("input",{className:"input-with-icon-adornment",placeholder:"Search by track or name",onChange:function(e){return i(e.target.value)}}))};var J=function(e){var t=e.playlists,a=Object(n.useContext)(v).dispatch,r=Object(P.f)(),i=function(e){r.push("/"),a({type:"SET_IS_LOADING",is_loading:!0}),H.a.get("/spotify/get_playlist",{params:{id:e}}).then((function(e){a({type:"SET_CURRENT_PLAYLIST",current_playlist:e.data}),a({type:"SET_IS_LOADING",is_loading:!1})}))};return l.a.createElement("div",{className:"sidebar"},l.a.createElement("img",{src:"https://getheavy.com/wp-content/uploads/2019/12/spotify2019-830x350.jpg",alt:"logo",className:"sidebar__logo"}),l.a.createElement("div",{className:"sidebar__top"},l.a.createElement(A.b,{to:"/"},l.a.createElement(U.a,null),l.a.createElement("h4",null,"Home")),l.a.createElement(z,null),l.a.createElement("button",{type:"button"},l.a.createElement(X.a,null),l.a.createElement("h4",null,"Your Library"))),l.a.createElement("strong",{className:"sidebar__title"},"Playlists"),l.a.createElement("hr",null),(null===t||void 0===t?void 0:t.items)&&t.items.map((function(e){return l.a.createElement(G,{title:e.name,key:e.name,getPlaylist:i,id:e.id})})))},M=a(65),V=a.n(M),$=a(66),K=a.n($),Q=a(67),Z=a.n(Q),ee=a(136),te=a(68),ae=a.n(te),ne=a(69),le=a.n(ne);a(111);var re=function(){var e,t,a,r,i=Object(n.useContext)(v),c=i.dispatch,s=l.a.useState(100),o=Object(u.a)(s,2),p=o[0],E=o[1],_=function(){var e,t;null===i.state.currently_playing?y():!1===(null===(e=i.state)||void 0===e?void 0:e.is_playing)&&(null===(t=i.state)||void 0===t?void 0:t.currently_playing)?(O.audio.play(),c({type:"SET_IS_PLAYING",is_playing:!0})):(O.audio.pause(),c({type:"SET_IS_PLAYING",is_playing:!1}))},y=function(){var e=i.state.current_playlist.tracks.items[0].track;O.play(e),c({type:"SET_IS_PLAYING",is_playing:!0}),c({type:"SET_CURRENTLY_PLAYING",currently_playing:e}),c({type:"SET_CURRENT_INDEX",index:0})};return l.a.createElement("div",{className:"footer"},l.a.createElement(m.a,{container:!0,spacing:1},l.a.createElement(m.a,{item:!0,xs:12,md:3},l.a.createElement(m.a,{container:!0,direction:"row",alignItems:"center"},l.a.createElement("img",{className:"footer__album",src:null===(e=i.state.currently_playing)||void 0===e||null===(t=e.album)||void 0===t?void 0:t.images[0].url,alt:""}),l.a.createElement("div",{className:"songRow__info"},l.a.createElement("h6",null,null===(a=i.state.currently_playing)||void 0===a?void 0:a.name),l.a.createElement("div",null,l.a.createElement("p",null,null===(r=i.state.currently_playing)||void 0===r?void 0:r.artists.map((function(e){return null===e||void 0===e?void 0:e.name})).join(", ")," ","-"," "))))),l.a.createElement(m.a,{item:!0,xs:12,md:6},l.a.createElement(m.a,{container:!0,direction:"row",justify:"center"},l.a.createElement(d.a,{"aria-label":"previous",onClick:function(){window.location.href.indexOf("search")>-1?O.play(i.state.search_data.data.tracks[i.state.index-1]):(null===i.state.index||0===i.state.index?y():(O.play(i.state.current_playlist.tracks.items[i.state.index-1].track),c({type:"SET_CURRENTLY_PLAYING",currently_playing:i.state.current_playlist.tracks.items[i.state.index-1].track})),c({type:"SET_IS_PLAYING",is_playing:!0})),c({type:"SET_CURRENT_INDEX",index:i.state.index-1})}},l.a.createElement(K.a,null)),!0===i.state.is_playing?l.a.createElement(d.a,{"aria-label":"pause",onClick:_},l.a.createElement(b.a,null)):l.a.createElement(d.a,{"aria-label":"play",onClick:_},l.a.createElement(V.a,null)),l.a.createElement(d.a,{"aria-label":"next",onClick:function(){window.location.href.indexOf("search")>-1?O.play(i.state.search_data.data.tracks[i.state.index+1]):null===i.state.index?y():(O.play(i.state.current_playlist.tracks.items[i.state.index+1].track),c({type:"SET_CURRENTLY_PLAYING",currently_playing:i.state.current_playlist.tracks.items[i.state.index+1].track})),c({type:"SET_CURRENT_INDEX",index:i.state.index+1})}},l.a.createElement(Z.a,null)))),l.a.createElement(m.a,{item:!0,xs:12,md:3},l.a.createElement(m.a,{container:!0,spacing:1,className:"footer__sliderContainer"},l.a.createElement(m.a,{item:!0},l.a.createElement(ae.a,null)),l.a.createElement(m.a,{item:!0,xs:!0},l.a.createElement(ee.a,{value:p,onChange:function(e,t){O.setVolume(t),E(t)},"aria-labelledby":"continuous-slider"})),l.a.createElement(m.a,{item:!0},l.a.createElement(le.a,null))))))};a(112);var ie=function(){var e,t,a,r,i=Object(n.useContext)(v);return l.a.createElement("div",{className:"searchPage"},l.a.createElement("div",{className:"searchPage__infoText"},l.a.createElement("h2",null,"Search Results")),(null===(e=i.state.search_data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.tracks)?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,{container:!0,spacing:1,alignItems:"center"},l.a.createElement(m.a,{item:!0,xs:4},"Title"),l.a.createElement(m.a,{item:!0,xs:3},"Artist"),l.a.createElement(m.a,{item:!0,xs:3},"Release Date"),l.a.createElement(m.a,{item:!0,xs:2},"Time")),l.a.createElement("div",null,null===(a=i.state.search_data)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.tracks.map((function(e,t){return l.a.createElement(T,{track:e,playSong:!0,key:t,index:t})})))):l.a.createElement("div",null,"There are no search results, please provide a search query."))},ce=a(133);var se=function(){var e=Object(n.useContext)(v),t=Object(ce.a)(["refresh_token","access_token"]),a=Object(u.a)(t,3),r=a[0],i=(a[1],a[2],Object(n.useState)(null)),c=Object(u.a)(i,2),m=c[0],d=c[1],p=Object(n.useState)({}),E=Object(u.a)(p,2),_=E[0],y=E[1],f=Object(n.useState)([]),g=Object(u.a)(f,2),h=g[0],b=g[1],x=Object(n.useState)((function(){return e.state.currently_playing})),N=Object(u.a)(x,2),S=(N[0],N[1],e.dispatch);return Object(n.useEffect)((function(){(function(){var e=Object(o.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.access_token&&r.refresh_token){e.next=4;break}d(!1),e.next=13;break;case 4:if(H.a.post("/refresh_token",{refresh_token:r.refresh_token}),d(!0),!r.access_token){e.next=13;break}return e.next=9,H.a.get("/spotify/me");case 9:n=e.sent,y(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.user),b(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.playlists),S({type:"SET_CURRENT_PLAYLIST",current_playlist:null===n||void 0===n?void 0:n.data.current_playlist});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),l.a.createElement(A.a,null,l.a.createElement(l.a.Fragment,null,!1===m?l.a.createElement(L,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"app"},l.a.createElement(Y,{user:_}),l.a.createElement(J,{playlists:h}),l.a.createElement(P.c,null,l.a.createElement(P.a,{path:"/",exact:!0,component:C}),l.a.createElement(P.a,{path:"/search",exact:!0,component:ie})),l.a.createElement(re,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(n.createContext)();var oe=a(134);i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(g,null,l.a.createElement(oe.a,null,l.a.createElement(se,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},46:function(e,t,a){},75:function(e,t,a){e.exports=a(113)},81:function(e,t,a){},82:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.79c247ae.chunk.js.map