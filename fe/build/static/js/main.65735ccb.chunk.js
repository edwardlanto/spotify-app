(this["webpackJsonpspotify-app"]=this["webpackJsonpspotify-app"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(15),c=a.n(r),i=(a(33),a(32)),o=a.n(i),s=a(42),u=a(11),m=(a(71),a(72),a(126)),d=a(131),p=a(47),E=a.n(p),v=a(14),f={current_playlist:[],currently_playing:{},spotify:null},_=Object(n.createContext)(f),g=_.Provider,y=function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){switch(t.type){case"SET_CURRENT_PLAYLIST":return Object(v.a)(Object(v.a)({},e),{},{current_playlist:t.current_playlist});case"SET_CURRENTLY_PLAYING":return Object(v.a)(Object(v.a)({},e),{},{currently_playing:t.currently_playing});case"SET_SPOTIFY":return Object(v.a)(Object(v.a)({},e),{},{spotify:t.spotify});default:return e}}),f),r=Object(u.a)(a,2),c=r[0],i=r[1];return l.a.createElement(g,{value:{state:c,dispatch:i}},t)},b=a(25),h=a.n(b);var O=function(e){var t=e.track,a=Object(n.useContext)(_);console.log("glboal state",a);var r=a.dispatch;return l.a.createElement(m.a,{container:!0,spacing:1,className:"songRow",alignItems:"center",direction:"row"},l.a.createElement(m.a,{item:!0,xs:4},l.a.createElement(d.a,{onClick:function(){return e=t.uri,a.state.spotify.play({uris:["".concat(e)]}),void r({type:"SET_CURRENTLY_PLAYING",currently_playing:t});var e}},l.a.createElement(E.a,null)),l.a.createElement("img",{className:"songRow__album",src:t.album.images[0].url,alt:""}),l.a.createElement("div",{className:"songRow__info"},l.a.createElement("h1",null,t.name),l.a.createElement("p",null,t.artists.map((function(e){return e.name})).join(", ")," - "))),l.a.createElement(m.a,{item:!0,xs:3,direction:"row",alignItems:"center"},t.album.name),l.a.createElement(m.a,{item:!0,xs:3,direction:"row",alignItems:"center"},t.album.release_date),l.a.createElement(m.a,{item:!0,xs:2,direction:"row",alignItems:"center"},function(e){var t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(0);return t+":"+(a<10?"0":"")+a}(t.duration_ms)))},j=a(48),k=a.n(j),x=a(49),N=a.n(x),w=a(128);var T=function(){var e,t,a,r=Object(n.useContext)(_);return Object(w.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),l.a.createElement("div",{className:"body"},l.a.createElement("div",{className:"body__info"},l.a.createElement("div",{className:"body__infoText"},l.a.createElement("strong",null,"PLAYLIST"),l.a.createElement("h2",null,null===(e=r.state.current_playlist)||void 0===e?void 0:e.name))),l.a.createElement("div",{className:"body__songs"},l.a.createElement("div",{className:"body__icons"},l.a.createElement(k.a,{fontSize:"large"}),l.a.createElement(N.a,null)),l.a.createElement(m.a,{container:!0,spacing:1,alignItems:"center"},l.a.createElement(m.a,{item:!0,xs:4},"Title"),l.a.createElement(m.a,{item:!0,xs:3},"Artist"),l.a.createElement(m.a,{item:!0,xs:3},"Release Date"),l.a.createElement(m.a,{item:!0,xs:2},"Time")),null===(t=r.state.current_playlist)||void 0===t||null===(a=t.tracks)||void 0===a?void 0:a.items.map((function(e,t){return l.a.createElement(O,{track:e.track,playSong:!0,key:t})}))))};a(95);var S=function(){return l.a.createElement("div",{class:"login"},l.a.createElement("img",{src:"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_RGB_White.png",alt:"logo"}),l.a.createElement("a",{href:"http://localhost:8888/login"},"Login with Spotify"))},C=(a(96),a(27)),I=a.n(C),R=a(133),L=a(132);Object(w.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch",color:"#fff"}}}}));function A(e){console.log(e.target.value)}var P=function(e){var t=e.user;return Object(n.useContext)(_).state.spotify,l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"header__left"},l.a.createElement(L.a,{className:"input-with-icon-adornment",onChange:A,startAdornment:l.a.createElement(R.a,{position:"start"},l.a.createElement(I.a,null))})),l.a.createElement("div",{className:"header__right"},l.a.createElement("h4",null,null===t||void 0===t?void 0:t.display_name)))};a(97),a(98);var Y=function(e){var t=e.title,a=e.Icon;return l.a.createElement("div",{className:"sidebarOption"},a&&l.a.createElement(a,{className:"sidebarOption__icon"}),t&&l.a.createElement("h4",null,t))},F=a(50),G=a.n(F),U=a(51),B=a.n(U);var M=function(e){var t=e.playlists;return l.a.createElement("div",{className:"sidebar"},l.a.createElement("img",{src:"https://getheavy.com/wp-content/uploads/2019/12/spotify2019-830x350.jpg",alt:"logo",className:"sidebar__logo"}),l.a.createElement(Y,{title:"Home",Icon:G.a,className:"sidebar__icon"}),l.a.createElement(Y,{title:"Search",Icon:I.a,className:"sidebar__icon"}),l.a.createElement(Y,{title:"Your Library",Icon:B.a,className:"sidebar__icon"}),l.a.createElement("strong",{className:"sidebar__title"},"Playlists"),l.a.createElement("hr",null),(null===t||void 0===t?void 0:t.items)&&t.items.map((function(e){return l.a.createElement(Y,{title:e.name,key:e.name})})))},W=a(55),D=a.n(W),J=a(53),z=a.n(J),H=a(56),$=a.n(H),q=a(52),K=a.n(q),Q=(a(99),a(54)),V=a.n(Q);var X=function(e){var t,a,r,c,i=e.currently_playing,o=Object(n.useContext)(_),s=K()(null===i||void 0===i?void 0:i.is_playing,(function(e){null!==(null===i||void 0===i?void 0:i.is_playing)&&null!==o.state.spotify&&(alert(e),!0===e?(console.log("spotify",o.state.spotify),console.log("cl shortcode",i)):o.state.spotify.pause())})),p=Object(u.a)(s,2),E=p[0],v=p[1];return Object(n.useEffect)((function(){v(null===i||void 0===i?void 0:i.is_playing)}),[]),l.a.createElement(m.a,{container:!0,spacing:1,className:"footer"},l.a.createElement(m.a,{item:!0,xs:12,md:3},l.a.createElement(m.a,{container:!0,direction:"row"},l.a.createElement("img",{className:"footer__album",src:null===i||void 0===i||null===(t=i.item)||void 0===t||null===(a=t.album)||void 0===a?void 0:a.images[0].url,alt:"artist album"}),l.a.createElement(m.a,{className:"songRow__info",direction:"row",container:!0,alignItems:"center"},l.a.createElement("h6",null,null===i||void 0===i||null===(r=i.item)||void 0===r?void 0:r.name),l.a.createElement("div",null,l.a.createElement("p",null,null===i||void 0===i||null===(c=i.item)||void 0===c?void 0:c.artists.map((function(e){return null===e||void 0===e?void 0:e.name})).join(", ")," ","-"," "))))),l.a.createElement(m.a,{item:!0,xs:12,md:6},l.a.createElement(d.a,{"aria-label":"previous",onClick:function(){o.state.spotify.skipToPrevious()}},l.a.createElement(z.a,null)),!0===E&&void 0!==E?l.a.createElement(d.a,{"aria-label":"pause",onClick:function(){return v(!1)}},l.a.createElement(V.a,null)):l.a.createElement(d.a,{"aria-label":"play",onClick:function(){return v(!0)}},l.a.createElement(D.a,null)),l.a.createElement(d.a,{"aria-label":"next"},l.a.createElement($.a,{onClick:function(){o.state.spotify.skipToNext()}}))))},Z=a(129),ee=a(57),te=new(a.n(ee).a);var ae=function(){var e=Object(Z.a)(["refresh_token","access_token"]),t=Object(u.a)(e,3),a=t[0],r=(t[1],t[2],Object(n.useState)(null)),c=Object(u.a)(r,2),i=c[0],m=c[1],d=Object(n.useState)({}),p=Object(u.a)(d,2),E=p[0],v=p[1],f=Object(n.useState)((function(){return null})),g=Object(u.a)(f,2),y=g[0],b=g[1],O=Object(n.useState)([]),j=Object(u.a)(O,2),k=j[0],x=j[1],N=Object(n.useContext)(_).dispatch;return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(o.a.mark((function e(){var t,n,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.access_token&&a.refresh_token){e.next=4;break}m(!1),e.next=17;break;case 4:if(h.a.post("/refresh_token",{refresh_token:a.refresh_token}),m(!0),!a.access_token){e.next=17;break}return te.setAccessToken(a.access_token),e.next=10,h.a.get("/spotify/me");case 10:l=e.sent,v(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.user),x(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.playlists),b(null===l||void 0===l?void 0:l.data.current_playing),console.log("Current DAT",null===l||void 0===l?void 0:l.data.current_playing),N({type:"SET_CURRENT_PLAYLIST",current_playlist:null===l||void 0===l?void 0:l.data.current_playlist}),N({type:"SET_SPOTIFY",spotify:te});case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),l.a.createElement(l.a.Fragment,null,!1===i?l.a.createElement(S,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"app"},l.a.createElement(P,{user:E}),l.a.createElement(M,{playlists:k}),l.a.createElement("div",{className:"padding-block"}),l.a.createElement(T,null),l.a.createElement(X,{currently_playing:y}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(n.createContext)();var ne=a(130);c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(y,null,l.a.createElement(ne.a,null,l.a.createElement(ae,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},33:function(e,t,a){},65:function(e,t,a){e.exports=a(100)},71:function(e,t,a){},72:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.65735ccb.chunk.js.map